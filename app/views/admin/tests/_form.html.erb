<table>
  <tr>
  <td>
    <%= button_to 'Back', tests_path, :method => :get, class: "btn btn-light min-width-btn" %>
  </td>
  <td>
    <%= button_tag 'Save', id: 'test_save_btn', class: 'btn btn-primary min-width-btn'  %>
  </td>
  <td>
    <%= button_tag '+ Question', id: 'add_question_btn', class: 'btn btn-primary min-width-btn' %>
  </td>
  </tr>
</table>

<%= form_for(test, remote: true, html: {id: 'test_form'}) do |form| %>
  <% if test.errors.any? %>
    <div id="error_explanation">
      <h5><%= pluralize(test.errors.count, "error") %> prohibited this test from being saved:</h5>

      <ul>
        <% test.errors.each do |error| %>
          <li><%= error.full_message %></li>
        <% end %>
      </ul>
    </div>
  <% end %>

  <div class="form-group">
    <strong>Name</strong>
    <%= form.text_field :name, placeholder: 'Test name...', class: "form-control form-control-sm" %>
  </div>

  <div class="form-group">
    <strong>Description</strong>
    <%= form.text_area :desc, placeholder: 'Test description...', class: "form-control form-control-sm" %>
  </div>
  
  <div class="form-group" style="display: none;">
  <%= form.submit %>
  </div>
  
  <div id="questions">
    <%= render partial: 'admin/tests/questions/form', locals: {pform: form, question: Question.new, index: 0} %>
    <% test.questions.each_with_index do |q, i| %>
      <%= render partial: 'admin/tests/questions/form', locals: {pform: form, question: q, index: i+1} %>          
    <% end %>
  </div>
<% end %>

<%= javascript_pack_tag 'tests_form' %>