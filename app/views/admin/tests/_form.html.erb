<table>
  <tr>
  <td>
    <%= button_to 'Back', tests_path, :method => :get %>
  </td>
  <td>
    <%= button_tag 'Save', id: 'test_save_btn' %>
  </td>
  <td>
    <%= button_tag '+ Question', id: 'add_question_btn' %>
  </td>
  </tr>
</table>

<%= form_for(test, remote: true, html: {id: 'test_form'}) do |form| %>
  <% if test.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(test.errors.count, "error") %> prohibited this test from being saved:</h2>

      <ul>
        <% test.errors.each do |error| %>
          <li><%= error.full_message %></li>
        <% end %>
      </ul>
    </div>
  <% end %>

  <div class="field">
    <%= form.label :name %>
    <%= form.text_field :name, placeholder: 'Test name...' %>
  </div>

  <div class="field">
    <%= form.label :desc %>
    <%= form.text_area :desc, placeholder: 'Test description...' %>
  </div>
  
  <div class="actions" style="display: none;">
  <%= form.submit %>
  </div>
  
  <div id="questions">
    <%= render partial: 'admin/tests/questions/form', locals: {pform: form, question: Question.new, index: 0} %>
    <% test.questions.each_with_index do |q, i| %>
      <%= render partial: 'admin/tests/questions/form', locals: {pform: form, question: q, index: i+1} %>          
    <% end %>
  </div>
<% end %>

<%= javascript_pack_tag 'tests_form' %>